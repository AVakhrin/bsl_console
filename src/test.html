<!DOCTYPE html>
<html>

<head>
  <title>Test BSL-editor</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.js"></script>
  <script>
    mocha.setup('bdd');
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/2.0.0/chai.js"></script>  
</head>

<body>

  <script>
    function getCode() {
      return [
        '// Это тестовая функция',
        'Функция Тестовая(Парам1, Парам2, Парам3) Экспорт',
        '',
        ' Док = Документы.АвансовыйОтчет.НайтиПоНомеру(1);',
        ' Док.Записать',
        ' Товар.Цена',
        '',
        'Запрос = ',
        '"ВЫБРАТЬ',
        '|ИЗ',
        '|Справочники";',
        '',
        'Если Истина Тогда',        
        '	Выполнить(ТекстКода);',
       	'	Счетчик = Счетчик + 1',
       	'	Состояние("Выполнено " + Счетчик + " из " + Всего);',        
        'КонецЕсли;',
        '',        
        'Пока Истина Цикл',        
        '	Выполнить(ТекстКода);',
       	'	Счетчик = Счетчик + 1',
       	'	Состояние("Выполнено " + Счетчик + " из " + Всего);',        
        'КонецЦикла;',
        '',        
        'Для Индекс = 1 По 5 Цикл',        
        '	Выполнить(ТекстКода);',
       	'	Счетчик = Счетчик + 1',
       	'	Состояние("Выполнено " + Счетчик + " из " + Всего);',        
        'КонецЦикла;',
        '',                
        'ТаблицаЗначений.Найти(Справочники.',
        '',
        ' Стр = ОписаниеОшибки',
        '',
        ' Новый ТаблицаЗначений',
        '',
        ' Новый HTTPЗапрос',
        '',
        ' Найти(HTTPЗапрос',
        '',
        ' ТаблицаЗначений.Добавить',
        '',
        ' СтрНайти',
        '',
        ' HTTPЗапрос.УстановитьТелоИзСтроки',
        '',
        'ЧислоСтр = Формат(Число, "ЧЦ=15; ЧДЦ=2; ЧГ=0")',
        '',
        'Запрос = Новый HTTPЗапрос();',
        'Запрос.',
        '',
        'Запрос = "ВЫБРАТЬ',
        '|	АвансовыйОтчет.ВалютаДокумента КАК ВалютаДокумента,',
        '|	АвансовыйОтчет.ВидОперации КАК ВидОперации,',
        '|	АвансовыйОтчет.Комментарий КАК Комментарий,',
        '|	АвансовыйОтчет.КурсДокумента КАК КурсДокумента,',
        '|	""ИСТИНА"" КАК Поле1,',
        '|	ВЫБОР',
        '|		КОГДА АвансовыйОтчет.ФизЛицо = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)',
        '|			ТОГДА ИСТИНА',
        '|		ИНАЧЕ ""ЛОЖЬ""',
        '|	КОНЕЦ КАК Поле2',
        '|ИЗ',
        '|	Документ.АвансовыйОтчет КАК АвансовыйОтчет"',
        '',
        'КонецФункции',
      ].join('\n');;
    }
  </script>

  <div id="container" style="width:100%;height:400px;border:1px solid grey"></div>  

  <script src="./vs/loader.js"></script>
  <script src="./bsl_helper.js"></script>
  <script src="./test.js"></script>

  <div id="mocha"></div>

</body>

</html>