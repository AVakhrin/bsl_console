<!DOCTYPE html>
<html>

<head>
  <title>BSL-editor</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">  
  <link href="./decorations.css" rel="stylesheet">
  <style>
    html,
    body {
      height: 100%;
      margin: 0px;
    }
    #container {
      height: 100%;
    }
  </style>
</head>

<body>

  <div id="container"></div>  

  <script>
    function getCode() {
      setTimeout(function() {
        switchQueryMode();
      }, 1000);      
      return [
      	'ВЫБРАТЬ',
		'	НДСЗаписиКнигиПродажОбороты.Организация КАК Организация,',
		'	НДСЗаписиКнигиПродажОбороты.Покупатель КАК Покупатель,',
		'	НДСЗаписиКнигиПродажОбороты.СчетФактура КАК СчетФактура,',
		'	НДСЗаписиКнигиПродажОбороты.ВидЦенности КАК ВидЦенности,',
		'	НДСЗаписиКнигиПродажОбороты.СтавкаНДС КАК СтавкаНДС,',
		'	НДСЗаписиКнигиПродажОбороты.ДатаОплаты КАК ДатаОплаты,',
		'	НДСЗаписиКнигиПродажОбороты.ДокументОплаты КАК ДокументОплаты,',
		'	НДСЗаписиКнигиПродажОбороты.Событие КАК Событие,',
		'	НДСЗаписиКнигиПродажОбороты.СуммаБезНДСОборот * -1 КАК СуммаБезНДССторно,',
		'	НДСЗаписиКнигиПродажОбороты.НДСОборот * -1 КАК НДССторно,',
		'	НДСЗаписиКнигиПродажОбороты.СуммаБезНДСОборот КАК СуммаБезНДС,',
		'	НДСЗаписиКнигиПродажОбороты.НДСОборот КАК НДС,',
		'	НДСЗаписиКнигиПродажОбороты.ДоговорКонтрагента КАК ДоговорКонтрагента',
		'	"ИСТИНА" КАК СтроковыйЛитерал,',
		'	ВЫБОР',
        '		КОГДА НДСЗаписиКнигиПродажОбороты.СчетФактура = ЗНАЧЕНИЕ(Документы.СчетаФактурыВыданные.ПустаяСсылка)',
        '			ТОГДА ИСТИНА',
        '		ИНАЧЕ "ЛОЖЬ"',
        '	КОНЕЦ КАК ПолеСВыбором',
		'ИЗ',
		'	РегистрНакопления.НДСЗаписиКнигиПродаж.Обороты(',
		'			&НачалоПериода,',
		'			&КонецПериодаГраница,',
		'			Квартал,',
		'			СчетФактура = &СчетФактура',
		'				И СчетФактура <> &Регистратор',
		'				И ВЫБОР',
		'					КОГДА &ДоговорКонтрагента = НЕОПРЕДЕЛЕНО',
		'						ТОГДА ИСТИНА',
		'					ИНАЧЕ ДоговорКонтрагента = &ДоговорКонтрагента',
		'				КОНЕЦ',
		'				И ВЫБОР',
		'					КОГДА &СтавкаНДС = НЕОПРЕДЕЛЕНО',
		'						ТОГДА ИСТИНА',
		'					ИНАЧЕ СтавкаНДС = &СтавкаНДС',
		'				КОНЕЦ) КАК НДСЗаписиКнигиПродажОбороты',
		'ГДЕ',
		'	(НЕ НДСЗаписиКнигиПродажОбороты.ЗаписьДополнительногоЛиста',
		'				И НДСЗаписиКнигиПродажОбороты.Период = &НачалоПериода',
		'			ИЛИ НДСЗаписиКнигиПродажОбороты.ЗаписьДополнительногоЛиста',
		'				И (НДСЗаписиКнигиПродажОбороты.КорректируемыйПериод МЕЖДУ &НачалоПериода И КОНЕЦПЕРИОДА(&НачалоПериода, МЕСЯЦ)))',        
      ].join('\n');      
    }
  </script>
  <script src="./vs/loader.js"></script>
  <script src="./bsl_helper.js"></script>
  <script src="./init.js"></script>

</body>

</html>